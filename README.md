# akshare- 股票得分计算工具

本项目基于 [AkShare](https://akshare.xyz/) 实现股票数据获取与得分计算，旨在为投资者提供便捷的股票量化分析工具。

## 功能介绍

- 一键获取 A 股市场股票数据
- 支持多种常用财务指标分析
- 自动化股票打分与筛选
- 可扩展的分析与评分模型

## 安装方法

1. 克隆本项目：
   ```bash
   git clone https://github.com/yourname/akshare-.git
   cd akshare-
   ```
2. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```
   3.建议使用代理运行
4.直接启动生成 100 排名报告

## 使用示例
无

## 依赖说明

- Python 12.7等等
- akshare
- TA-Lib
- numpy
- pandas
- pytz

## 联系方式

如有问题或建议，请通过未知名方式联系作者。

# 股票得分计算函数 (calculate_stock_score)

## 功能概述

`calculate_stock_score` 函数是一个综合性的股票评分系统，用于预测股票短期（1-3 天）内的上涨潜力和涨停可能性。该函数通过多维度分析股票的技术指标、量价关系、趋势特征等因素，为每只股票生成一个综合得分（0-150 分），分数越高表示上涨潜力越大。

## 参数说明

```python
def calculate_stock_score(df: pd.DataFrame, params: TradingParams) -> pd.DataFrame:
    """
    计算股票综合得分，综合考虑价格趋势、量能、技术指标、反转信号等因素。

    参数:
        df: 包含技术指标的DataFrame，至少应包含OHLCV基础数据和常用技术指标
        params: 交易参数配置，包含各种阈值和敏感度设置

    返回:
        添加了各项得分和综合评分的DataFrame
    """
```

- **df**: 包含股票数据和技术指标的 DataFrame，必须包含以下基础列：

  - `Open`, `High`, `Low`, `Close`, `Volume`: 基础 OHLCV 数据
  - 常用技术指标：`RSI`, `MACD`, `KDJ`, `MA`系列等

- **params**: `TradingParams`类的实例，包含交易参数配置，如：
  - `closing_strength_threshold`: 收盘强度阈值
  - 各类指标的阈值和敏感度参数

## 返回值

函数返回原始 DataFrame 加上以下评分列：

- **各维度得分**:

  - `价格趋势得分`: 评估价格走势和 K 线形态 (0-25 分)
  - `量能得分`: 评估成交量特征和资金流向 (0-20 分)
  - `技术指标得分`: 评估 RSI、MACD 等技术指标 (0-30 分)
  - `短线信号得分`: 评估系统生成的短线交易信号 (0-20 分)
  - `市场因素得分`: 评估市场趋势和行业因素 (0-10 分)
  - `反转信号得分`: 评估潜在反转机会 (0-8 分)
  - `涨停概率得分`: 评估涨停可能性 (0-10 分)
  - `连续上涨得分`: 评估连续上涨趋势 (0-5 分)
  - `价格动量得分`: 评估短期价格动能 (0-10 分)
  - `支撑突破得分`: 评估价格突破支撑位情况 (0-6 分)

- **综合评分**:

  - `股票得分`: 各维度加权求和的综合得分 (0-150 分)
  - `上涨潜力`: 基于综合得分的评级 ('低', '中', '高', '极高')

- **交易参考**:
  - `建议买入下限`: 建议的买入价格下限
  - `建议买入上限`: 建议的买入价格上限
  - `目标价`: 预期目标价格
  - `止损价`: 建议止损价格

## 评分维度详解

### 1. 价格趋势评分 (最高 25 分)

评估价格走势强度、均线系统状态和 K 线形态，包括：

- **收盘强度评分** (0-8 分): 收盘价在当日价格区间的相对位置
- **均线关系评分** (0-8 分): 价格与均线的关系，均线多头排列状态
- **K 线形态评分** (0-7 分): K 线形态识别，如锤子线、吞没形态等
- **波动率评分** (0-4 分): 适度的波动性有利于上涨

### 2. 量能评分 (最高 20 分)

评估成交量特征和资金流向，包括：

- **量比评分** (0-5 分): 成交量相对于 5 日平均量的比值
- **资金流向评分** (0-9 分): MFI、CMF、OBV 等资金流向指标
- **量价配合评分** (0-6 分): 量价关系，量价同步上涨是强势特征

### 3. 技术指标评分 (最高 30 分)

评估常用技术指标的状态，包括：

- **RSI 指标评分** (0-10 分): RSI 超买超卖状态、金叉情况
- **MACD 指标评分** (0-9 分): MACD 零轴位置、柱状图变化
- **KDJ 指标评分** (0-6 分): KDJ 金叉、J 线超卖回升
- **ADX 趋势强度评分** (0-5 分): 趋势强度和方向

### 4. 短线信号评分 (最高 20 分)

评估短线交易信号，包括：

- **短线买入信号** (0-12 分): 系统生成的买入信号
- **次日上涨概率** (0-8 分): 基于历史数据的统计概率

### 5. 市场因素评分 (最高 10 分)

评估外部市场环境，包括：

- **市场趋势评分** (0-5 分): 大盘趋势
- **市场情绪评分** (0-5 分): 市场活跃度
- **行业趋势评分** (0-5 分): 所属行业整体趋势

### 6. 反转信号评分 (最高 8 分)

评估潜在反转机会，包括：

- **超跌反弹信号** (0-4 分): RSI 超卖反弹
- **突破信号** (0-4 分): 价格突破关键均线或阻力位

### 7. 涨停概率得分 (最高 10 分)

基于涨停概率模型的评分，同时考虑涨停风险。

### 8. 连续上涨得分 (最高 5 分)

评估连续上涨趋势，连续 2 天上涨最有可能继续上涨。

### 9. 价格动量得分 (最高 10 分)

评估短期价格动能，包括近期涨幅和高开走强形态。

### 10. 支撑突破得分 (最高 6 分)

评估价格突破关键支撑位的情况。

## 使用示例

```python
import pandas as pd
from RS import calculate_stock_score, TradingParams

# 准备数据 - 假设df已包含所需的技术指标
df = pd.read_csv('stock_data.csv')

# 创建交易参数
params = TradingParams()

# 计算股票得分
scored_df = calculate_stock_score(df, params)

# 查看最新得分
latest_score = scored_df.iloc[-1]['股票得分']
print(f"股票综合得分: {latest_score}")
print(f"上涨潜力: {scored_df.iloc[-1]['上涨潜力']}")
print(f"建议买入区间: {scored_df.iloc[-1]['建议买入下限']} - {scored_df.iloc[-1]['建议买入上限']}")
print(f"目标价: {scored_df.iloc[-1]['目标价']}")
print(f"止损价: {scored_df.iloc[-1]['止损价']}")
```

## 提示与注意事项

1. 确保输入数据包含足够的历史数据点（至少 20 个）以计算各类技术指标
2. 函数已针对短线交易进行优化，特别关注 1-3 天内可能上涨或涨停的股票
3. 得分应与其他分析方法结合使用，不建议仅依赖得分进行交易决策
4. 股票得分仅为技术面分析，不考虑基本面因素和突发性事件影响
5. 涨停概率评分基于历史统计，在特殊市场环境下可能不准确
